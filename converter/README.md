# 問題データ作成・変換ガイド

このドキュメントは、本ウェブサイトの問題データを効率的に作成・管理するための手順を説明します。
作業は大きく分けて2つのステップに分かれています。

1.  **問題の作成 (CSV形式)**: ExcelやGoogle スプレッドシートを使い、指定されたフォーマットで問題を作成します。
2.  **データの変換 (JSON形式)**: 作成したCSVファイルを、ウェブサイトで読み込むためのJSON形式に変換します。

## 1. スプレッドシートで問題を作成する方向け (CSV作成ガイド)

問題作成担当の方は、使い慣れた表計算ソフト（Excel, Google スプレッドシートなど）で問題を作成できます。以下の手順とルールに従ってください。

### 手順

1.  **新規スプレッドシートを作成します。**
    *   ファイルは**1教科につき1ファイル**で管理します。（例: `math.csv`, `chemistry.csv`）
2.  **1行目に、以下のヘッダー（列名）を正確に入力します。**

    ```
    row_type,set_id,set_title,set_description,is_math,q_id,q_num,question_text,hint,answer,explanation
    ```

3.  **2行目以降に、問題データを入力します。**

### データ入力のルール

CSVの各行は「**問題セットの定義行 (`set`)**」と「**個別の問題行 (`question`)**」の2種類で構成されます。

-   **`row_type`列に `set` と入力した行:**
    -   新しい大問（問題セット）の始まりを意味します。
    -   `set_id`, `set_title`, `set_description`, `is_math` の列に情報を入力します。他の列は空欄で構いません。
-   **`row_type`列に `question` と入力した行:**
    -   直前の `set` 行に属する、個別の問題です。
    -   `q_id` から `explanation` までの列に問題の情報を入力します。

#### 列の詳細

| 列名 | 必須 | 説明 |
| :--- | :--- | :--- |
| **`row_type`** | **はい** | 行の種類です。`set` または `question` と入力します。 |
| `set_id` | `set`の時 | 問題セット固有のIDです。 **英数字とハイフンのみ** で作成してください。（例: `math-curves-1`） |
| `set_title` | `set`の時 | 問題セットのタイトルです。（例: `二次曲線 (問題)`） |
| `set_description` | `set`の時 | 問題セットの説明文です。 |
| `is_math` | `set`の時 | 数式を含む場合は `TRUE` と入力します。MathJax（数式表示ライブラリ）を有効にするための設定です。 |
| `q_id` | `question`の時 | 各問題固有のIDです。 **英数字とハイフンのみ** で作成してください。（例: `math-curves-q1`） |
| `q_num` | `question`の時 | 問題番号です。（例: `第1問`, `C1-A1`） |
| `question_text` | `question`の時 | 問題文です。改行は `<br>` タグを使用できます。 |
| `hint` | `question`の時 | ヒントの文章です。 |
| `answer` | `question`の時 | 解答です。 |
| `explanation` | `question`の時 | 解説文です。 |

#### 入力例 (`math.csv`)



### ⚠️ **重要事項** ⚠️

-   **値にカンマ(`,`)を使わないでください！**
    -   問題文や解説文の途中でカンマを使うと、CSVの区切り文字と判断されてレイアウトが崩れる原因になります。読点には「、」を使用してください。
-   **保存形式:**
    -   スプレッドシートを保存する際は、必ず **CSV (カンマ区切り) 形式** でエクスポート（ダウンロード）してください。
    -   文字コードは **UTF-8** を推奨します。

---

## 2. CSVからJSONへ変換する方向け (変換ツール利用ガイド)

CSVファイルが完成したら、次の手順でウェブサイト用のJSONファイルに変換します。この作業は専用の変換ツール（`converter.html`）で行います。

### 手順

1.  **変換ツールを開く:**
    -   プロジェクトフォルダ内にある `converter.html` ファイルを、Google ChromeなどのWebブラウザで開きます。

2.  **CSVファイルを読み込む:**
    -   変換したいCSVファイル（例: `math.csv`）を、画面の「ここにファイルをドロップ」と書かれたエリアにドラッグ＆ドロップします。
    -   または、エリアをクリックしてファイルを選択することも可能です。

3.  **教科情報を入力する:**
    -   **教科ID:** ウェブサイト内部で使うIDです。`subjects.json`（目次ファイル）で定義するものと同じIDを **英数字** で入力します。（例: `math`）
    -   **教科名:** ウェブサイトのナビゲーションに表示される名前です。（例: `数学`）

    

4.  **変換を実行する:**
    -   **「変換」**ボタンをクリックします。
    -   成功すると、下のテキストエリアに変換後のJSONデータが表示されます。内容が正しいかざっと確認してください。

5.  **JSONファイルをダウンロードする:**
    -   **「JSONファイルをダウンロード」**ボタンをクリックします。
    -   ファイルは、入力した「教科ID」を元にした名前（例: `math.json`）で保存されます。

6.  **ファイルを配置する:**
    -   ダウンロードしたJSONファイル（例: `math.json`）を、`index.html` や `subjects.json` がある**プロジェクトのルートフォルダに配置**してください。

---

## 3. ウェブサイトに新しい教科を反映させる方法 (管理者向け)

新しい教科のJSONファイル（例: `language.json`）を作成したら、最後にウェブサイトの「目次」である `subjects.json` にその情報を追加する必要があります。

1.  プロジェクトのルートフォルダにある `subjects.json` をテキストエディタで開きます。
2.  既存の教科リストに、新しい教科の情報を追記します。

#### `subjects.json` の編集例

`language.json` を追加する場合：

```json
[
  {
    "id": "chemistry",
    "title": "化学",
    "icon": "science",
    "file": "chemistry.json"
  },
  {
    "id": "math",
    "title": "数学",
    "icon": "calculate",
    "file": "math.json"
  },
  {
    "id": "language",
    "title": "国語",
    "icon": "book",
    "file": "language.json"
  }
]
```

これで、ウェブサイトを次に開いたときに、サイドナビゲーションに「国語」が自動的に追加されます。